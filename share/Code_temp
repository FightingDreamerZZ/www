<?php
//zz in index.php
$r=-1;
echo $r;
echo -$r;


$a = array();

$b = array();
$b["id"] = "1";
$b["name"]="haha";
$b["age"]="12";
array_push($a,$b);
$b = array();
$b["id"] = "2";
$b["name"]="heh2";
$b["age"]="6";

array_push($a,$b);
$b = array(
"id"=>"3",
"name"=>"hh",
"age"=>"7"
);
array_push($a,$b);
$b = array(
"id"=>"1",
"name"=>"haa",
"age"=>"11"
);
array_push($a,$b);
$b = array(
"id"=>"4",
"name"=>"ha",
"age"=>"10"
);
array_push($a,$b);
foreach ($a as $k=>$v){
print_r($v);
echo "<br/>";
}
echo "<br/>";
echo "<br/>";
echo "<br/>";
usort($a,function (array $a1, array $b1){
if(($r = $b1["id"]-$a1["id"]) != 0){
return $r;
}
else{
return strcmp($b1["age"],$a1["age"]);
}
});

foreach ($a as $k=>$v){
print_r($v);
echo "<br/>";
}
echo "<br/>";
echo "<br/>";
print_r($b);
//zz

//zz in tran_list.php:
//zz
$array_result_set_after_combine = combine_same_barcode($result_info_1);
$array_result_set_after_sort =
    sort_by_two_fields($array_result_set_after_combine,"quantity", true,"name",true);
?>
<!--    zz-->
    <table>
        <tr>


            <td>Barcode</td>
            <td>Name</td>

            <td>Amount</td>

        </tr>
        <?php
        foreach ($array_result_set_after_sort as $item) {
            ?>
            <tr>


                <td><?php echo $item["barcode"]; ?></td>
                <td><?php echo $item["name"]; ?></td>

                <td><?php echo $item["quantity"]; ?></td>

            </tr>
            <?php
        };
        ?>
    </table>
<!--    zz-->

<?php
//depart.php
//zz test: sendPostRequest("depart.php",{"focus_on":"115127525006","submitbarcode":"whatever"},"POST");

    //depart.php

if($_POST['confirm_decrease']){  //zz decrease是随便起的名字、其实是那个给用户自定义取多少件的小form、这是其handler
    if($_POST['amount'] <= 0){
        stop("Decrease amount must be greater than 0!");
    }
    $barcode = $_POST['barcode'];//zz ?之前post的数据这次post也能也还在吗？--其使用了hidden的input，form常用手法，学起来
    $decrease = -abs($_POST['amount']);
    $decrease_this_time = $decrease;
    $appli = $_POST['appli'];
    $table = get_table($barcode);
    $sql_code = "select * from `".$table."` where barcode = '".$barcode."';";
    $result_info = mysql_query($sql_code);
    $a_check = mysql_fetch_array($result_info);
    if(($a_check[quantity]+cart_amount($_COOKIE['ew_user_name'],$barcode)) < -$decrease){
        stop('Not enough stock!');
    }else{
        if($_GET['application']) {
            cart($_COOKIE['ew_user_name'], $barcode, $decrease, $table, $_GET['application']);//zz 错误的理解、作纪念
        }
        else{
            cart($_COOKIE['ew_user_name'], $barcode, $decrease, $table, "unknown");//zz
        }
    }
    $cart_amount = cart_amount($_COOKIE['ew_user_name'],$barcode);
    $sql_code_a = "SELECT * FROM `ew_relation` WHERE `main_part` = '".$barcode."' ORDER BY `rid` ASC;";
    $result_info_a = mysql_query($sql_code_a);
}

//zz
echo "radio_application!--".$appli."--";

//下面用到的东东（来配合的
?>
<input type="text" style="display:none;" name="appli" id="hidden_input_appli" value = "
            <?php
//                if($appli){echo $appli;}
//                else{echo "Unknown";}
            ?>
            Unknown
        " autocomplete="off"/>

Depart&nbsp;<input type="text" name="amount" value = "<?php if($suggested_decrease){echo $suggested_decrease;}else{echo "0";}?>"
                   class="input_field_w w50" autocomplete="off"/> of this part with an application of
<?php
                if($appli)
                    echo $appli;
                else
                    echo "Unknown";
?>
<a id="lbl_appli">Unknown</a>
? &nbsp;
<input type="submit" class="submit_btn" name="confirm_decrease" value="Confirm"/>

<?php
//login.php:

    //以前的一些实验：
//$path1 = 'lib\sql.php';
//echo "$path1";
//$user = posix_getpwuid(posix_geteuid());
////var_dump($user);
////phpinfo();
//echo ini_get("allow_url_include");
////var_dump(LIB_PATH.DS.'lib\user_lib.php');
///
    ?>
    //depart.php
<script>
    //本来想整这个、后来发现也不对、就算改了cookies，现在页的马上要啊。。要不也得刷新页面一下、触发一下handler
function ajax_sendHttpRequest(path, params, method) {
    var xmlHttp;
    if(window.XMLHttpRequest){
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlHttp = new XMLHttpRequest();
    }
    else{// code for IE6, IE5
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttp.onreadystatechange = function () {
        if(xmlHttp.readyState == 4 && xmlHttp.status == 200){
            //response
        }
    }
        xmlHttp.open(method)
    }
</script>
<?php
//zz
if($_COOKIE['is_to_omit_cart']){
    echo "cookie!cookie=".$_COOKIE['is_to_omit_cart'];
}
if($_COOKIE['is_to_omit_cart']) {
    echo "cookie!cookie=" . $_COOKIE['is_to_omit_cart'];
    ...
}
if($_POST['is_to_omit_cart']){
    $cookie_is_to_omit_cart = $_POST['is_to_omit_cart'];
    setcookie("is_to_omit_cart",$_POST['is_to_omit_cart'],time() + 60*60*2);
    echo "cookie!=post".$_POST['is_to_omit_cart'];
}


echo $ew_verified."<br/>";
echo $pass;


//zz
$the_day_30days_before_today = date("Y-m-d", strtotime("-30 days"));
echo "the_day_30days_before_today".$the_day_30days_before_today;
//zz



        //zz
$result = get_pctg_of_4seasons_of_the_y("2017");
var_dump($result);
//zz

?>

<!--        zz-->
<?php var_dump($array_result_set_after_sort_w_appli);?>

<button value="haha" onclick="hahaha()">ha</button>
<script>
    // define a handler
    function doc_keyUp(e) {

        // this would test for whichever key is 40 and the ctrl key at the same time
        if (e.key == "v") {
            // call your function to do the thing
            alert("haa");
        }
    }
    // register the handler
    document.addEventListener('keyup', doc_keyUp, false);
    function hahaha() {
        alert("hah");
    }
    $(window).keydown(function (e) {
        if(e.key = "v"){
            alert("haa");
        }
    })
    $(document).keyPress(function (e) {
        if(e.key = "v"){
            alert("haa");
        }
    })

</script>

//zz about user type:
// 1->super user(non-admin, but can use all 3 systems warehouse, acc and crm)
// 2->warehouse user (non-admin, can only use warehouse)
// 3->acc user, 4->crm user
// 5->warehouse admin (admin, has some privileges esp warehouse-related such as approve to proceed a cart into system DB)
// Admin->System admin (will use a different system, for user creation and view log etc advanced operation, but no access to normal operation)

<!--    zz notification popup animation part 4/4-->
    <button type="button" id="btntest">haha</button>
    <div id="message"></div>
<!--    -->

/*zz notification popup animation part 3/4*/
    #message {
        position:absolute;
        display:none;
        height:100px;
        width:200px;
        border: 1px gray solid;
        background-color:lime;
        font-size: 1.4em;
        line-height:100px;
        text-align:center;
        border-radius: 5px;
        /*bottom: 100px;*/
    }

        //zz notification popup animation part 1/4
        // "Create a notification popup animated in a specific way?"(http://jsfiddle.net/2qJfF/)
        (function($) {
            $.fn.extend({
                center: function() {
                    return this.each(function() {
                        var left = ($(window).width() - $(this).outerWidth()) / 2;
                        var bottom = ($(window).height() - $(this).outerHeight()) / 4;
                        $(this).css({
                            position: 'absolute',
                            margin: 0,
                            left: (left > 0 ? left : 0) + 'px',
                            bottom: (bottom > 0 ? bottom : 0) + 'px'
                        });
                    });
                }
            });
        })(jQuery);

        //zz notification popup animation part 2/4
        $("#message").center();
        $("#btntest").click(function() {
            var msg = $("#message");
            msg.text("Item saved!")
            msg.hide()
            msg.stop(true, true).fadeIn(500).delay(1000).animate({
                "bottom": "4px",
                "height": "17px",
                "font-size": "1em",
                "left": "80px",
                "line-height": "17px",
                "width": "100px"
            }).fadeOut(5000).css({
                "height": "100px",
                "width": "200px",
                "font-size": "1.4em",
                "line-height": "100px",
                "bottom": "100px"
            }).center();
        });


        <!--    for newly added row from search bar-->
            <?php if($row_3){
                $w_quantity = ($row_3["w_quantity"] =='0')?"n/a":$row_3["w_quantity"];
                echo "<tr>

                        <td><a href='view_part.php?barcode=".$row_3[barcode]."'>
                                ".$row_3[barcode]."
                            </a>
                        </td>
                        <td style='min-width: 150px'>".$row_3["name"]."</td>
                        <td style='max-width: 70px；white-space: normal; word-wrap:break-word'>".$row_3["part_num"]."</td>
                        <td style='max-width: 70px;'
                            id='cell_edit_partnumyigao_".$row_1["barcode"]."'
                            ondblclick='edit_part_num_yigao(".$row_3["barcode"].",".$row_3["part_num_yigao"].")'
                            onblur='changed()'>
                            ".$row_3["part_num_yigao"]."</td>
                        <td>".$row_3["quantity"]."</td>
                        <td>".$w_quantity."</td>


                        <td><input type='checkbox' name='checkbox_".$row_3["barcode"]."' value='checked'/></td>
                        <td><input type='text' name='txt_order_amount_".$row_3["barcode"]."' value =''
                               class='input_field_w w50' autocomplete='off'/></td>
                        <td><input type='text' name='txt_note_".$row_3["barcode"]."' value =''
                               class='input_field_w w50' autocomplete='off'/></td>
                      </tr>";}
            ?>
        <!--    <td>".$row_3["l_zone"]."_".$row_3["l_column"]."_".$row_3["l_level"]."</td>-->


//zz 以下：- search页的smart search功能（乃至所有的smartSearch bar）都有个问题：点击弹出来的ajax链接之后非得先再用这些关键字search一下搜出一条结果然后才能点进去——应能从ajax链接直接进入下个页面
        （他们原本是仍然链去search页的，需要改成链去view_part页）
//for $resultset
//zz <a href="search.php?keyword=xx+yy&table=ew_part">partName partNumber</a>
//            echo "<a href='search.php?keyword=".$url."&table=".$_POST['table']."'>".$row_1["name"]."&nbsp;".$row_1["part_num"]."</a>";

//for $resultset_pn
//            echo "<a href='search.php?keyword=" . $url . "&table=" . $_POST['table'] . "'>" . $row_11["name"] . "&nbsp;" . $row_11["part_num"] . "</a>";

//for $resultset_ac
//zz <a href="search.php?keyword=xx+yy&table=ew_part">partName partNumber</a>
//            echo "<a href='search.php?keyword=" . $url . "&table=" . $_POST['table'] . "'>" . $row_12["name"] . "&nbsp;" . $row_12["part_num"] . "</a>";

//zz 无“special”switch时：
最后一个
<a href="search.php?keyword=<?php echo $url; ?>&table=<?php echo $_POST['table']; ?>">
        <?php echo $row_12["name"]."&nbsp;".$row_12["part_num"]; ?>
    </a>&nbsp;
倒是第二个
<a href="search.php?keyword=<?php echo $url; ?>&table=<?php echo $_POST['table']; ?>">
        <?php echo $row_11["name"]."&nbsp;".$row_11["part_num"]; ?>
    </a>&nbsp;

//zz smartSearch's ajax's $special
<?php switch($special){
        case "create_part_ordering_sheet":
            echo "<a href='../create_part_ordering_sheet.php?barcode=".$row_1["barcode"]."'>".$row_1["name"]."&nbsp;".$row_1["part_num"]."</a>";
            break;
        case "depart":
            break;
        case "enter":
            break;
        case "stock_counting":
            //zz <a href="stock_counting.php?barcode=xxxxx">partName <small>partNumber</small></a>
            $page_url = "stock_counting.php?barcode=".$row_1["barcode"];
            $inner_html = $row_1["name"]."&nbsp;".$row_1["part_num"];
            echo "<a href='{$page_url}'>{$inner_html}</a>";
            break;
        case null:
            //zz <a href="view_part.php?barcode=xxxxx">partName partNumber</a>
            $page_url = get_view($table)."?barcode=".$row_1["barcode"];
            $inner_html = $row_1["name"]."&nbsp;".$row_1["part_num"];
            echo "<a href='{$page_url}'>{$inner_html}</a>";
            break;
    }
?>
<?php switch($special) {
        case "create_part_ordering_sheet":
            echo "<a href='../create_part_ordering_sheet.php?barcode=" . $row_11["barcode"] . "'>" . $row_11["name"] . "&nbsp;" . $row_11["part_num"] . "</a>";
            break;
        case "depart":
            break;
        case "enter":
            break;
        case "stock_counting":
            //zz <a href="stock_counting.php?barcode=xxxxx">partName <small>partNumber</small></a>
            $page_url = "stock_counting.php?barcode=".$row_1["barcode"];
            $inner_html = $row_1["name"]."&nbsp;".$row_1["part_num"];
            echo "<a href='{$page_url}'>{$inner_html}</a>";
            break;
        case null:
            $page_url = "view_part.php?barcode=".$row_11["barcode"];
            $inner_html = $row_11["name"]."&nbsp;".$row_11["part_num"];
            echo "<a href='{$page_url}'>{$inner_html}</a>";
            break;
}?>


//zz original add-new-part handler
<?php
        $sql_code = "INSERT INTO `ew_part`
    	(`barcode`, `name`, `photo_url`, `part_num`, `category`, `color`, `sub_category`, `p_price`, `w_price`, `r_price`, `quantity`, `w_quantity`, `l_zone`, `l_column`, `l_level`, `date`, `des`, `xsearch`)
    	VALUES ('$barcode', '$name', '$photo_url', '$part_num', '$category', '$color', '$sub_category',
    	'$p_price', '$w_price', '$r_price', '$quantity', '$w_quantity', '$l_zone', '$l_column', '$l_level', CURRENT_TIMESTAMP, '$des', '$xsearch');";
        //echo($sql_code);

        if (!($result=mysql_query($sql_code))) {

            mysql_close($link);
            echo("<script>window.alert('DB Error!');</script>");
            die('<meta http-equiv="refresh" content="0;URL=new_part.php">');
        }
        else{
            tran($_COOKIE['ew_user_name'],$barcode,'part',$quantity,"N/A");//zz appli set to N/A (appli is only for depart)
            sys_log($_COOKIE['ew_user_name'],"add new part, barcode=$barcode,name=$name,amount=$quantity");
            //cart($_COOKIE['ew_user_name'],$barcode,$quantity,'ew_part');
            mysql_close($link);
            echo("<script>window.alert('New Part has been created!');</script>");
            die('<meta http-equiv="refresh" content="0;URL=stock_counting.php?barcode='.$barcode.'">');
        }
?>
//zz /original add-new-part handler


//zz experiment
<div class="btn-group">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                Action
            </button>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Separated link</a>
            </div>
        </div>

        <ul class="nav nav-pills" role="tablist">
            <li role="presentation"><a href="#">Regular link</a>
            </li>
            <li role="presentation" class="dropdown">
                <a id="drop4" href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
                    Dropdown
                    <span class="caret"></span>
                </a>
                <ul id="menu6" class="dropdown-menu animated fadeInDown" role="menu">
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Another action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Something else here</a>
                    </li>
                    <li role="presentation" class="divider"></li>
                    <li role="presentation"><a role=ulenuitem" tabindex="-1" href="https://twitter.com/fat">Separated link</a>
                    </li>
                </ul>
            </li>
            <li role="presentation" class="dropdown">
                <a id="drop5" href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
                    Dropdown
                    <span class="caret"></span>
                </a>
                <ul id="menu2" class="dropdown-menu animated fadeInDown" role="menu" aria-labelledby="drop5">
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Another action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Something else here</a>
                    </li>
                    <li role="presentation" class="divider"></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Separated link</a>
                    </li>
                </ul>
            </li>
            <li role="presentation" class="dropdown">
                <a id="drop6" href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
                    Dropdown
                    <span class="caret"></span>
                </a>
                <ul id="menu3" class="dropdown-menu animated fadeInDown" role="menu" aria-labelledby="drop6">
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Another action</a>
                    </li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Something else here</a>
                    </li>
                    <li role="presentation" class="divider"></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="https://twitter.com/fat">Separated link</a>
                    </li>
                </ul>
            </li>
        </ul>

//stock_counting.php testing bootstrap styling
<div id="main">

        <div class="content_box_top"></div>
        <div class="content_box">

            <p><?php echo($total_records); ?> result(s) was found in this query. Sort by <a href ="list.php?<?php echo trim_url("&sort="); ?>">[Default]</a> <a href="list.php?<?php echo trim_url("&sort="); ?>&sort=name">[Name]</a> <a href="list.php?<?php echo trim_url("&sort="); ?>&sort=color">[Color]</a>  <a href="list.php?<?php echo trim_url("&sort="); ?>&sort=category">[Category]</a></p>


            <p>Page:
                <?php

                for ($i=1; $i<=$total_pages; $i++) {
                    echo "<a href='stock_counting_list.php?page=".$i.$urltag."'>".$i."</a> ";
                };
                ?>
            </p>


            <table>
                <tr>

                    <td>Barcode</td>
                    <td>Name</td>
                    <td>Category</td>
                    <?php if($table == "ew_part"){echo "<td>For</td>";} ?>
                    <?php if($table == "ew_car"){echo "<td>Model</td>";} ?>
                    <td>Color</td>
                    <?php if($table == "ew_car"){echo "<td>Condition</td>";} ?>
                    <td>InStock</td>
                    <td>Warning</td>
                    <td>Location</td>
                    <td>LastCountingEvent</td>
                    <td>Action</td>
                </tr>
                <?php
                while ($row_1 = mysql_fetch_assoc($result_info_1)) {
                    $c_event_name_tmp = get_c_event_by('c_event_id', $row_1["last_counting_event"])['c_event_name'];
                    $c_event_name_tmp = ($c_event_name_tmp==false)?"N/A":$c_event_name_tmp;
                    ?>
                    <tr>
                        <td><a href="stock_counting.php?barcode=<?php echo $row_1["barcode"]; ?>">
                                <?php echo $row_1["barcode"]; ?>
                            </a>
                        </td>
                        <td><?php echo $row_1["name"]; ?></td>
                        <td><?php echo $row_1["category"]; ?></td>
                        <?php if($table == "ew_part"){echo "<td>".$row_1["sub_category"]."</td>";} ?>
                        <?php if($table == "ew_car"){echo "<td>".$row_1["model"]."</td>";} ?>
                        <td><?php echo $row_1["color"]; ?></td>
                        <?php if($table == "ew_car"){echo "<td>".$row_1["condition"]."</td>";} ?>
                        <td><?php echo $row_1["quantity"]; ?></td>
                        <td><?php if($row_1["w_quantity"] =='0'){ echo "n/a";}else{ echo $row_1["w_quantity"];}; ?></td>
                        <td><?php echo $row_1["l_zone"]."_".$row_1["l_column"]."_".$row_1["l_level"]; ?></td>
                        <td><?php echo $c_event_name_tmp;?></td>
                        <td><a href="stock_counting.php?edit_mode=1&barcode=<?php echo $row_1["barcode"]; ?>">Edit</a></td>
                    </tr>
                    <?php
                };
                ?>
            </table>


            <div class="cleaner h30"></div>
            <div class="cleaner"></div>
            <div class="cleaner"></div>
        </div> <!-- end of a content box -->
        <div class="content_box_bottom"></div>
    </div> <!-- end of main -->

//zz layout bootstrap
<form class="form-horizontal form-label-left">
                                <div class="row">
                                    <div class="col-md-6 col-xs-12">

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Name</label>
                                            <p class="col-md-9 col-sm-9 col-xs-12"><?php echo($a_check['name']); ?></p>
<!--                                            <div class="col-md-9 col-sm-9 col-xs-12">-->
<!--                                                <input type="text" class="form-control" disabled-->
<!--                                                    value="--><?php //echo($a_check['name']); ?><!--"/>-->
<!--                                            </div>-->
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Barcode</label>
                                            <p class="col-md-9 col-sm-9 col-xs-12"><?php echo($a_check['name']); ?></p>
<!--                                            <div class="col-md-9 col-sm-9 col-xs-12">-->
<!--                                                <input type="text" class="form-control" disabled-->
<!--                                                       value="--><?php //echo($a_check['barcode']); ?><!--"/>-->
<!--                                            </div>-->
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Part Number</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['part_num']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Part Number (Eagle)</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['part_num_yigao']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Category</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['category']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Color</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['color']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Purchase Price</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['p_price']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Wholesale Price</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['w_price']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Retail Price</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['r_price']); ?>"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Stock Warning</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['w_quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Location</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <a href="search.php?table=ew_part&keyword=<?php echo($a_check['l_zone']."_".$a_check['l_column']."_".$a_check['l_level']); ?>">
                                                    <?php echo($a_check['l_zone']."_".$a_check['l_column']."_".$a_check['l_level']); ?></a>
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input type="text" class="form-control" disabled
                                                       value="<?php echo($a_check['quantity']); ?>"/>
                                            </div>
                                        </div>




                                    </div>
                                </div>
                            </form>



                            <div class="col_w320 float_r">



                                <ul class = "list">
                                    <li>Name: <?php echo($a_check['name']); ?></li>
                                    <li>Barcode: <?php echo($a_check['barcode']); ?></li>
                                    <li title="This part number is for AGT. They are older, more stable and referred on our product manuals.">Part Number: <?php echo($a_check['part_num']); ?></li>
                                    <li title="The newest part number on the domestic, Eagle side. It is useful when ordering parts from them.">Part Number (Eagle): <?php echo($a_check['part_num_yigao']); ?></li>
                                    <li>Category: <a href="search.php?table=ew_part&keyword=<?php echo($a_check['category']); ?>"><?php echo($a_check['category']); ?></a></li>
                                    <li>For: <a href="search.php?table=ew_part&keyword=<?php echo($a_check['sub_category']); ?>"><?php echo($a_check['sub_category']); ?></a></li>
                                    <li>Color: <a href="search.php?table=ew_part&keyword=<?php echo($a_check['color']); ?>"><?php echo($a_check['color']); ?></a></li>
                                    <li>Purchase Price: <?php echo($a_check['p_price']); ?></li>
                                    <li>Wholesale Price: <?php echo($a_check['w_price']); ?></li>
                                    <li>Retail Price: <?php echo($a_check['r_price']); ?></li>
                                    <li>Quantity: <?php echo($a_check['quantity']); ?></li>
                                    <li>Stock Warning: <?php echo($a_check['w_quantity']); ?></li>
                                    <li>Location: <a href="search.php?table=ew_part&keyword=<?php echo($a_check['l_zone']."_".$a_check['l_column']."_".$a_check['l_level']); ?>"><?php echo($a_check['l_zone']."_".$a_check['l_column']."_".$a_check['l_level']); ?></a></li>
                                    <li>Latest Update: <?php echo($a_check['date']); ?></li>

                                    <!--    zz temp for organizing1809-->
                                    <label>Flag Organizing1809: <?php echo($a_check['organizing201809']); ?></label>

                                    <li title="Last Counting Event that the part has involved and counted..">
                                        Last Counting Event: <?php echo($c_event_name); ?>
                                    </li>
                                    <li>Description: <?php echo($a_check['des']); ?></li>

                                </ul>
                            </div>

//zz x_panel's title's right corner toolbox:
                        <ul class="nav navbar-right panel_toolbox">
                            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>
<!--                            <li class="dropdown">-->
<!--                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>-->
<!--                                <ul class="dropdown-menu" role="menu">-->
<!--                                    <li><a href="#">Settings 1</a>-->
<!--                                    </li>-->
<!--                                    <li><a href="#">Settings 2</a>-->
<!--                                    </li>-->
<!--                                </ul>-->
<!--                            </li>-->
                            <li><a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>

//zz coutningEventDDL backup:
<!--zz countingEvent ddl-->
        <div id="div_c_event_ddl" style="float: right;position: relative">
<!--            <select name="last_counting_event"-->
<!--                    id="last_counting_event">-->
<!--                <option value="" selected disabled>--Please select the current counting event--</option>-->
<!--                --><?php //?>
<!--                <option value="N/A"-->
<!--                        title="">-->
<!--                    N/A</option>-->
<!--                <option value="buy_new"-->
<!--                        title="">-->
<!--                    Buying new cart</option>-->
<!--                <option value="trade_in"-->
<!--                        title="">-->
<!--                    Trade in old cart</option>-->
<!--                <option value="" selected disabled><hr></option>-->
<!--                <option value="" selected disabled>--Please select the current counting event--</option>-->
<!--            </select>-->
            <label>Current counting event:&nbsp;</label>
            <div class="btn-group">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    <?php echo $selected_current_c_event;?> &nbsp;
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right">
                    <?php
                        foreach($array_c_events as $c_event){
                            echo <<<temp
                                <li>
                                    <a href="stock_counting.php?selected_c_c_event_id={$c_event['c_event_id']}">
                                        {$c_event['c_event_name']}
                                    </a>
                                </li>
temp;
                        }
                    ?>
                    <li role="separator" class="divider"></li>
                    <li><button onclick="add_new_c_evnt()">+ Add New</button></li>
                </ul>
                <style>
                    .dropdown-menu-right{
                        right:0;
                        left:auto;
                    }
                </style>
            </div>
        </div>
        <!--zz /countingEvent ddl-->

//zz view photo
<h4>Photo Preview</h4>

                                <!--<div style="width: 300px;height: 300px;" class="withborder">-->
                                <a href="<?php echo($a_check['photo_url']); ?>" target="_blank">
                                    <img style="width:auto;height:auto;object-fit: cover;overflow: hidden" class="withborder" src="<?php echo get_thumb($a_check['photo_url']); ?>"/>
                                    <!--        class="image_wrapper"-->
                                </a>
                                <!--</div>-->
                                <div class="cleaner h10"></div>
                                <p><a href="edit_part.php?barcode=<?php echo $a_check["barcode"]; ?>&do=del">[ Delete ]</a> - Warning, delete will set the part quantity to "0" and warning quantity to "-1".</p>

//zz editPartOld
                                <div id="newcar_form">

                                    <form name="form" method="post" enctype="multipart/form-data">
                                        <label>Photo:</label><input type="file" name="file"><input type="text" style="display:none;" name="photo_url" value="<?php echo($a_check['photo_url']); ?>"/><br>
                                        <label>Barcode: </label><input type="text" name="barcode" value="<?php echo($a_check['barcode']); ?>"/><br />
                                        <label>Car Name: </label><input type="text" name="name" value="<?php echo($a_check['name']); ?>"/><br />
                                        <label title="This part number is for AGT. They are older, more stable and referred on our product manuals.">
                                            Part Number: </label><input type="text" name="part_num" value="<?php echo($a_check['part_num']); ?>"/><br />
                                        <label title="The newest part number on the domestic, Eagle side. It is useful when ordering parts from them.">
                                            Part Number (Eagle): </label><input type="text" name="part_num_yigao" value="<?php echo($a_check['part_num_yigao']); ?>"/><br />

                                        <label>Category: </label>
                                        <select name="category">
                                            <option value="body" <?php if($a_check['category'] == 'body'){ echo("selected=\"selected\"");} ?>>Body</option>
                                            <option value="accessory" <?php if($a_check['category'] == 'accessory'){ echo("selected=\"selected\"");} ?>>Accessory</option>
                                            <option value="tire_and_rim" <?php if($a_check['category'] == 'tire_and_rim'){ echo("selected=\"selected\"");} ?>>Tire and Rim</option>
                                            <option value="mechanical" <?php if($a_check['category'] == 'mechanical'){ echo("selected=\"selected\"");} ?>>Mechanical</option>
                                            <option value="electrical" <?php if($a_check['category'] == 'electrical'){ echo("selected=\"selected\"");} ?>>Electrical</option>
                                        </select><br />

                                        <!--<label>For: </label>-->
                                        <!--<input type="checkbox" name="sub1" value="CLUB" --><?php //if (strpos($a_check['sub_category'], 'CLUB') !== false){echo "checked";} ?><!-- >CLUB-->
                                        <!--<input type="checkbox" name="sub2" value="EZGO" --><?php //if (strpos($a_check['sub_category'], 'EZGO') !== false){echo "checked";} ?><!-- >EZGO-->
                                        <!--<input type="checkbox" name="sub3" value="AGT" --><?php //if (strpos($a_check['sub_category'], 'AGT') !== false){echo "checked";} ?><!-- >AGT-->
                                        <!--<input type="checkbox" name="sub4" value="YAMAHA" --><?php //if (strpos($a_check['sub_category'], 'YAMAHA') !== false){echo "checked";} ?><!-- >YAMAHA-->
                                        <!--<br />-->
                                        <label>Color: </label><input type="text" name="color" value="<?php echo($a_check['color']); ?>"/><br />
                                        <label>Purchase Price: </label><input type="text" name="p_price" value="<?php echo($a_check['p_price']); ?>"/><br />
                                        <label>Wholesale Price: </label><input type="text" name="w_price" value="<?php echo($a_check['w_price']); ?>"/><br />
                                        <label>Retail Price: </label><input type="text" name="r_price" value="<?php echo($a_check['r_price']); ?>"/><br />
                                        <label>Quantity: <?php /*echo($a_check['quantity']); */?></label><input type="text" style="/*display:none;*/" name="quantity" value="<?php echo($a_check['quantity']); ?>"/><br />
                                        <label>Warning Quantity: </label><input type="text" name="w_quantity" value="<?php echo($a_check['w_quantity']); ?>"/><br />
                                        <!--    zz-->
                                        <img src="images/map.gif" height="" width="300" style="margin-top: 10px;margin-bottom: 10px" usemap="#map1">
                                        <map id="map1" name="map2">
                                            <area shape="rect" coords="98,46,240,104" alt="" title="P1" onclick="testzz()" style="cursor: pointer"/>
                                            <script>
                                                function testzz() {
                                                    // alert("haha");
                                                    // history.go(-1);
                                                    window.location = '#location_z';
                                                    document.getElementById("location_z").value="P1";
                                                    document.form.l_column.value = '';
                                                    document.form.l_column.focus();
                                                }
                                            </script>
                                        </map>
                                        <!--    zz-->
                                        <label>Location Zone: </label><!--zz --><input id="location_z" type="text" name="l_zone" value="<?php echo($a_check['l_zone']); ?>"/><br />
                                        <label>Location Column: </label><input type="text" name="l_column" value="<?php echo($a_check['l_column']); ?>"/><br />
                                        <label>Location Level: </label><input type="text" name="l_level" value="<?php echo($a_check['l_level']); ?>"/><br />

                                        <!--    zz temp for organizing1809-->
                                        <label>- Flag Organizing1809: </label><input type="text" name="organizing1809" value="<?php echo($a_check['organizing201809']); ?>"/><br />

                                        <label>Last Counting Event: </label>
                                        <select name="c_event_id" title="Last Counting Event that the part has involved and counted..">
                                            <?php
                                            foreach($array_c_events as $c_event){
                                                $c_event_name_temp=$c_event['c_event_name'];
                                                $c_event_id_temp=$c_event['c_event_id'];
                                                $selected_temp = ($c_event_name_temp == $selected_current_c_event)?'selected="selected"':'';
                                                echo <<<temp
                                <option value="$c_event_id_temp" {$selected_temp}>
                                    {$c_event_name_temp}
                                </option>
temp;
                                            }
                                            ?>
                                            <option value="NULL" {$selected_temp}>
                                                NULL (not belong to any)
                                            </option>
                                        </select><br />

                                        <label>Description: </label><br/>
                                        <textarea rows="4" cols="50" name="des"><?php echo($a_check['des']); ?></textarea><br/>
                                        <input type="submit" name="submit_edit" class="submit_btn float_l" value="Edit"/>
                                    </form>

                                </div>
//zz temp addNewPart section in stackCountingModule:
<div class="col_w320 float_r">
                                <div id="newcar_form">
                                    <form class="form-horizontal form-label-left"
                                          name="form" method="post" enctype="multipart/form-data">
                                        <label>Photo:</label><input type="file" name="file"><br>
                                        <label>Barcode: </label><input type="text" name="barcode" value ="<?php echo "1".substr(round(microtime(true) * 1000),0, -2); ?>"/><br />
                                        <label>Name: </label><input type="text" name="name"/><br />
                                        <label>Part Number: </label><input type="text" name="part_num"/><br />
                                        <label title="The newest part number on the domestic, Eaglee side. It is useful when ordering parts from them.">
                                            Part Number (Eagle): </label><input type="text" name="part_num_yigao"/><br />
                                        <label>Category: </label>
                                        <select name="category">
                                            <option value="body">Body</option>
                                            <option value="accessory">Accessory</option>
                                            <option value="tire_and_rim">Tire and Rim</option>
                                            <option value="mechanical">Mechanical</option>
                                            <option value="electrical">Electrical</option>
                                        </select><br />
                                        <!--<label>For:</label>-->
                                        <!--<input type="checkbox" name="sub1" value="CLUB">CLUB-->
                                        <!--<input type="checkbox" name="sub2" value="EZGO">EZGO-->
                                        <!--<input type="checkbox" name="sub3" value="AGT">AGT-->
                                        <!--<input type="checkbox" name="sub4" value="YAMAHA">YAMAHA<br />-->
                                        <label>Color: </label><input type="text" name="color" value="default"/><br />
                                        <label>Purchase Price: </label><input type="text" name="p_price" value="0"/><br />
                                        <label>Wholesale Price: </label><input type="text" name="w_price"value="0"/><br />
                                        <label>Retail Price: </label><input type="text" name="r_price" value="0"/><br />
                                        <label>Quantity: </label><input type="text" name="quantity"value="0"/><br />
                                        <label>Warning Quantity: </label><input type="text" name="w_quantity" value="0"/><br />
                                        <label>Location Zone: </label><input type="text" name="l_zone" value=""/><br />
                                        <label>Location Column: </label><input type="text" name="l_column" value=""/><br />
                                        <label>Location Level: </label><input type="text" name="l_level"value=""/><br />
                                        <label>Description: </label><br/>
                                        <textarea rows="4" cols="50" name="des">
                        </textarea><br/>
                                        <!--    zz temp for organizing1809-->
                                        <label>- Flag Organizing1809: </label><input type="text" name="organizing1809" value=""/><br />

                                        <label>Last Counting Event: </label>
                                        <select name="c_event_id" title="Last Counting Event that the part has involved and counted..">
                                            <?php
                                            foreach($array_c_events as $c_event){
                                                $c_event_name_temp=$c_event['c_event_name'];
                                                $c_event_id_temp=$c_event['c_event_id'];
                                                $selected_temp = ($c_event_name_temp == $selected_current_c_event)?'selected="selected"':'';
                                                echo <<<temp
                                <option value="$c_event_id_temp" {$selected_temp}>
                                    {$c_event_name_temp}
                                </option>
temp;
                                            }
                                            ?>
                                            <option value="NULL" {$selected_temp}>
                                                NULL (not belong to any)
                                            </option>
                                        </select><br />

                                        <input type="submit" name="submit_new" value="Create"/>
                                    </form>
                                </div>
                            </div>

